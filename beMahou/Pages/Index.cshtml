@page
@model IndexModel
@{
    ViewData["Title"] = "Inicio";
}

<div class="be-mahou-feed-container">
    @if (Model.Publicaciones.Any())
    {
        @foreach (var pub in Model.Publicaciones)
        {
            <div class="be-mahou-post-card">
                <!-- Cabecera del post -->
                <div class="be-mahou-post-header">
                    <div class="be-mahou-post-user">
                        <div class="be-mahou-user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="be-mahou-user-info">
                            <span class="be-mahou-username">@pub.Usuario</span>
                            <span class="be-mahou-location">
                                <i class="fas fa-map-marker-alt"></i> @pub.Bar
                            </span>
                        </div>
                    </div>
                    <span class="be-mahou-post-category @pub.Categoria.ToString().ToLower()">
                        @pub.Categoria
                    </span>
                </div>

                <!-- Contenido del post -->
                <div class="be-mahou-post-content">
                    <p class="be-mahou-post-text">@pub.Experiencia</p>
                    
                    @if (!string.IsNullOrEmpty(pub.FotoUrl))
                    {
                        <div class="be-mahou-post-image-wrapper">
                            <img src="@pub.FotoUrl" class="be-mahou-post-image" alt="Imagen de @pub.Bar">
                        </div>
                    }
                </div>

                <!-- Acciones del post -->
                <div class="be-mahou-post-actions">
                    <div class="be-mahou-action-buttons">
                        <button class="be-mahou-action-btn be-mahou-like-btn" data-id="@pub.Id">
                            <i class="far fa-star"></i>
                            <span class="be-mahou-like-count">@pub.Estrellas</span>
                        </button>
                        <button class="be-mahou-action-btn be-mahou-comment-btn">
                            <i class="far fa-comment"></i>
                            <span class="be-mahou-comment-count">0</span>
                        </button>
                        <button class="be-mahou-action-btn be-mahou-share-btn">
                            <i class="fas fa-share"></i>
                        </button>
                    </div>
                    <div class="be-mahou-post-date">
                        <i class="far fa-clock"></i>
                        <span>@pub.Fecha.ToString("g")</span>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <div class="be-mahou-empty-feed">
            <div class="be-mahou-empty-content">
                <i class="fas fa-beer be-mahou-empty-icon"></i>
                <h3 class="be-mahou-empty-title">¡No hay publicaciones aún!</h3>
                <p class="be-mahou-empty-text">Sé el primero en compartir tu experiencia Mahou</p>
                <a asp-page="/NuevaPublicacion" class="btn btn-danger be-mahou-empty-btn">
                    <i class="fas fa-plus me-2"></i>Crear publicación
                </a>
            </div>
        </div>
    }
</div>

@section Styles {
    <link rel="stylesheet" href="/css/site.css" asp-append-version="true" />
}

@section Scripts {
    <script src="/js/feed.js" asp-append-version="true"></script>
}